define("kirin/utils/1.0.0/string",["./cstring"],function(a){var b=a("./cstring"),c=function(a){return new b(a)};return c.fn=b.prototype,c}),define("kirin/utils/1.0.0/string",["./cstring"],function(a,b,c){var d=a("./helper"),e=d.dblPrototype("",function(a){this.str=a,this.length=a.length}),f=/^[a-zA-Z0-9\-_.!~*'()]*$/,g=/&/g,h=/</g,i=/>/g,j=/\"/g,k=/[&<>\"]/;d.augment(e,{toInt:function(a){return parseInt(this.str,a||10)},hexToRgb:function(a){var b=this.str.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return b?b.slice(1).hexToRgb(a):null},rgbToHex:function(a){var b=this.str.match(/\d{1,3}/g);return b?b.rgbToHex(a):null},parseColor:function(a){if("rgb("==this.str.slice(0,4))var b=this.rgbToHex();else{var b="#";if("#"==this.str.slice(0,1)){if(4==this.str.length)for(var c=1;4>c;c++)b+=(this.str.charAt(c)+this.str.charAt(c)).toLowerCase();7==this.str.length&&(b=this.str.toLowerCase())}}return 7==b.length?b:a||this.str},stripScripts:function(a,b){var c="",d=this.str.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(){return c+=arguments[1],""});return"function"==typeof a&&a.call(b,c,d),d},trimLeft:function(){return this.str.replace(/^[\s\xa0]+/,"")},trimRight:function(){return this.str.replace(/[\s\xa0]+$/,"")},urlEncode:function(){return f.test(this.str)?this.str:encodeURIComponent(this.str)},urlDecode:function(){return decodeURIComponent(this.str.replace(/\+/g," "))},escapeHTML:function(){if(!k.test(this.str))return this.str;var a=this.str;return-1!=a.indexOf("&")&&(a=a.replace(g,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(h,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(i,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(j,"&quot;")),a},contains:function(a,b){return b?(b+this.str+b).indexOf(b+a+b)>-1:this.str.indexOf(a)>-1},trim:function(){for(var a=this.str.replace(/^\s+/,""),b=a.length-1;b>=0;b--)if(/\S/.test(a.charAt(b))){a=a.substring(0,b+1);break}return a},clean:function(){return this.trim(this.str.replace(/\s+/g," "))},pad:function(a,b,c){b||(b="0");var d=String(this.str),e=b.repeat(Math.ceil((a-d.length)/b.length));return c?d+e:e+d},capitalize:function(){var a=this.str.replace(/\b[a-z]/g,function(a){return a.toUpperCase()});return a},ftoh:function(a){var b,c,d="",a=a||"both";switch(a){case"all":case"both":b=this.trim();break;case"left":b=this.trimLeft();break;case"right":b=this.trimRight();break;default:b=this.str}for(var e=0,f=b.length;f>e;e++)if(c=b.charCodeAt(e),12288!=c)if(c>65280&&65375>c)d+=String.fromCharCode(c-65248);else{if(32==c&&"all"==a)continue;d+=String.fromCharCode(b.charCodeAt(e))}else"all"!=a&&(d+=String.fromCharCode(c-12256));return d},zeroPadding:function(a){return this.pad(a)},pluralize:function(a,b){return b=parseInt(b),0===b?a:1===b?this:a},linkify:function(a){var b=String(this.str);return b=b.stripTags(),b=b.replace(/\b[a-z0-9-_!#$%&'`=\*\+\-\/\?\^\{\|\}\~]+@[a-z0-9]+?[a-z0-9\-\.]+\.[a-z]{2,4}/gi,function(){return'<a href="mailto:'+arguments[0]+'">'+arguments[0]+"</a>"}),b=b.replace(/(^|[^a-z0-9@\.\-]{1}|[a-zA-Z]+:\/\/|www\.)((?:[0-9]{1,3}\.){3}[0-9]{1,3}|(?:[a-z0-9]+(?:-[a-z0-9]+)*\.)+[a-z]{2,})(:[0-9]+)?(\/[^\?\s]+)?(\?\S+)?/gi,function(){var b=arguments[1]+'<a href="'+arguments[2]+'"';return a&&(b+=' target="'+a+'"'),b+=">"+arguments[2]+"</a>"})},trim:function(){return String(this.str).replace(/^\s+/,"").replace(/\s+$/,"")},repeat:function(a){return String(new Array(a+1).join(String(this)))},upperCaseFirst:function(){var a=String(this.str);return a.charAt(0).toUpperCase()+a.slice(1)},camelCase:function(){var a=this.str.replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()});return a},camelCase:function(a){var b=String(this.str);return a=a||!1,b=b.replace(/([^a-zA-Z]+[a-z])/g,function(a){return a.toUpperCase().slice(1)}),a&&(b=b.upperCaseFirst()),b},hyphenate:function(){var a=this.replace(/[A-Z]/g,function(a){return"-"+a.charAt(0).toLowerCase()});return a},slug:function(a){a=a||"-";var b=String(this.str);return b=b.replace(/([A-Z])/g,function(a){return" "+a.toLowerCase()}),b=b.replace(/([^a-z0-9]+)/g," "),b=b.replace(/\s+/g," "),b=b.trim().replace(/ +/g,a)},escapeRegExp:function(){return this.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},toFloat:function(){return parseFloat(String(this.str))},parseTrueInt:function(){var a=parseInt(this.str);return isNaN(a)?0:a},stripTags:function(a){"undefined"==typeof a&&(a="");var b=String(this.str);return b=b.replace(/<\s*(\/|)\s*p\s*>/g,"\n"),b=b.replace(/<\s*(\/|)\s*br\s*(\/|)\s*>/g,"\n"),b=b.replace(/<\s*(\/|)\s*[^>]+\s*(\/|)\s*>/g,a),b=b.replace(/(\r\n|\n\r|\r|\n|\t)/g,"\n"),b=b.replace(/\t/g," "),b=b.replace(/\n+/g,"\n"),b=b.replace(/\s+/g," "),b.trim()},shorten:function(a,b){var c=String(this.str);if(a=String(a).parseTrueInt()||55,b=b||"",c.length>a){c=c.substr(0,a-b.length);var d=Math.max(c.lastIndexOf("."),c.lastIndexOf(","),c.lastIndexOf(";"),c.lastIndexOf(" "));d>a?c=c.substr(0,a-b.length):d>0&&(c=c.substr(0,d)),b.length>0&&("."==c.substr(c.length-1)?c=c.substr(0,c.length-1):","==c.substr(c.length-1)&&(c=c.substr(0,c.length-1)),c+=b)}return c},addSlashes:function(a){a=a||"'";var b=new RegExp(a,"g");return String(this).replace(b,"\\"+a)},htmlDecode:function(){for(var a=String(this),b=/&#(\d+);/g,c=b.exec(a);null!=c;){var d=new RegExp(c[0],"g");a=a.replace(d,String.fromCharCode(c[1])),c=b.exec(a)}for(var e in entitiesToChars){var f=new RegExp(e,"g");a=a.replace(f,entitiesToChars[e])}return String(a)},htmlEncode:function(){var a=String(this);for(var b in charToEntities){var c=new RegExp(b,"g");a=a.replace(c,charToEntities[b])}return String(a)}}),c.exports=e,e.prototype.toString=function(){return this.str}});
